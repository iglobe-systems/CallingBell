{"version":3,"sources":["./src/app/pages/tech/tech-home/tech-home.page.html","./src/app/pages/tech/tech-home/tech-home.module.ts","./src/app/pages/tech/tech-home/tech-home.page.scss","./src/app/pages/tech/tech-home/tech-home.page.ts"],"names":[],"mappings":"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","file":"pages-tech-tech-home-tech-home-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"danger\\\">\\n        <div class=\\\"logo-in\\\"></div>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button size=\\\"small\\\" shape=\\\"round\\\" color=\\\"light\\\" (click)=\\\"logout()\\\" class=\\\"fw700\\\">\\n        <ion-icon name=\\\"log-out\\\"></ion-icon>\\n   \\t\\tLOGOUT\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  \\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\" color=\\\"light\\\">\\n<!-- <div class=\\\"text-center\\\"> -->\\n\\t<ion-button class=\\\"ion-margin\\\" shape=\\\"round\\\" expand=\\\"full\\\" color=\\\"dark\\\" (click)=\\\"openTickets()\\\">Open Tickets</ion-button>\\n\\t<ion-button class=\\\"ion-margin\\\" shape=\\\"round\\\" expand=\\\"full\\\" color=\\\"dark\\\" (click)=\\\"closedTickets()\\\">Closed Tickets</ion-button>\\n<!-- </div> -->\\n\\n \\n<!-- image upload 1-->\\n<!--  <h3 *ngIf=\\\"images.length == 0\\\" text-center>Please Select Image!</h3>\\n \\n  <ion-list>\\n    <ion-item *ngFor=\\\"let img of images; index as pos\\\" text-wrap>\\n      <ion-thumbnail slot=\\\"start\\\">\\n        <ion-img [src]=\\\"img.path\\\"></ion-img>\\n      </ion-thumbnail>\\n      <ion-label>\\n        {{ img.name }}\\n      </ion-label>\\n      <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" (click)=\\\"startUpload(img)\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"cloud-upload\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" (click)=\\\"deleteImage(img, pos)\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"trash\\\"></ion-icon>\\n      </ion-button>\\n    </ion-item>\\n  </ion-list> -->\\n\\n  <!-- image upload 2 -->\\n  <!-- <button (click)=\\\"upload()\\\" ion-button>Take Pic & Upload </button> -->\\n\\n\\n</ion-content>\\n\\n<!-- <ion-footer>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-button fill=\\\"clear\\\" expand=\\\"full\\\" color=\\\"light\\\" (click)=\\\"selectImage()\\\">\\n      <ion-icon slot=\\\"start\\\" name=\\\"camera\\\"></ion-icon>\\n      Select Image</ion-button>\\n  </ion-toolbar>\\n</ion-footer> -->\\n\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TechHomePage } from './tech-home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TechHomePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [TechHomePage]\n})\nexport class TechHomePageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3RlY2gvdGVjaC1ob21lL3RlY2gtaG9tZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport {\n  NavController,\n  AlertController,\n  MenuController,\n  ToastController,\n  PopoverController,\n  ModalController,\n  LoadingController,\n   Platform\n} from '@ionic/angular';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AlertService } from 'src/app/services/alert.service';\n\nimport {Camera,CameraOptions} from '@ionic-native/camera/ngx';\n// image upload\nimport { ChangeDetectorRef  } from '@angular/core';\nimport { PictureSourceType } from '@ionic-native/camera/ngx';\nimport { ActionSheetController } from '@ionic/angular';\nimport { File, FileEntry } from '@ionic-native/file/ngx';\nimport { HttpClient } from '@angular/common/http';\nimport { WebView } from '@ionic-native/ionic-webview/ngx';\nimport { Storage } from '@ionic/storage';\nimport { FilePath } from '@ionic-native/file-path/ngx';\n \nimport { finalize } from 'rxjs/operators';\n\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';\n\n\nconst STORAGE_KEY = 'my_images';\n\n@Component({\n  selector: 'app-tech-home',\n  templateUrl: './tech-home.page.html',\n  styleUrls: ['./tech-home.page.scss'],\n})\nexport class TechHomePage implements OnInit {\n  \n  images = [];\n\n  transfer:any;\n\n  constructor(public navCtrl: NavController,\n    public menuCtrl: MenuController,\n    public popoverCtrl: PopoverController,\n    public alertCtrl: AlertController,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    public authService: AuthService,\n    public loadingCtrl: LoadingController,\n    private alertService: AlertService,\n    private camera: Camera, \n    private file: File, \n    private http: HttpClient, \n    private webview: WebView,\n    private actionSheetController: ActionSheetController, \n    private toastController: ToastController,\n    private storage: Storage, \n    private plt: Platform, \n    private loadingController: LoadingController,\n    private ref: ChangeDetectorRef, \n    private filePath: FilePath\n    ) { }\n\n  ngOnInit() {\n        this.plt.ready().then(() => {\n      this.loadStoredImages();\n    });\n  }\n\n\n  openTickets(){\n  \tthis.navCtrl.navigateForward('open-tickets')\n  }\n\n   closedTickets(){\n      this.navCtrl.navigateForward('closed-tickets')\n  }\n\n  logout() {\n    this.authService.techlogout();\n    this.navCtrl.navigateRoot('/');\n  }\n\n\n\nloadStoredImages() {\n    this.storage.get(STORAGE_KEY).then(images => {\n      if (images) {\n        let arr = JSON.parse(images);\n        this.images = [];\n        for (let img of arr) {\n          let filePath = this.file.dataDirectory + img;\n          let resPath = this.pathForImage(filePath);\n          this.images.push({ name: img, path: resPath, filePath: filePath });\n        }\n      }\n    });\n  }\n \n  pathForImage(img) {\n    if (img === null) {\n      return '';\n    } else {\n      let converted = this.webview.convertFileSrc(img);\n      return converted;\n    }\n  }\n \n  async presentToast(text) {\n    const toast = await this.toastController.create({\n        message: text,\n        position: 'bottom',\n        duration: 3000\n    });\n    toast.present();\n  }\n async selectImage() {\n    const actionSheet = await this.actionSheetController.create({\n        header: \"Select Image source\",\n        buttons: [{\n                text: 'Load from Library',\n                handler: () => {\n                    this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY);\n                }\n            },\n            {\n                text: 'Use Camera',\n                handler: () => {\n                    this.takePicture(this.camera.PictureSourceType.CAMERA);\n                }\n            },\n            {\n                text: 'Cancel',\n                role: 'cancel'\n            }\n        ]\n    });\n    await actionSheet.present();\n}\n \ntakePicture(sourceType: PictureSourceType) {\n    var options: CameraOptions = {\n        quality: 10,\n        sourceType: sourceType,\n        saveToPhotoAlbum: false,\n        correctOrientation: true\n    };\n \n    this.camera.getPicture(options).then(imagePath => {\n        if (this.plt.is('android') && sourceType === this.camera.PictureSourceType.PHOTOLIBRARY) {\n            this.filePath.resolveNativePath(imagePath)\n                .then(filePath => {\n                    let correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);\n                    let currentName = imagePath.substring(imagePath.lastIndexOf('/') + 1, imagePath.lastIndexOf('?'));\n                    this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\n                });\n        } else {\n            var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);\n            var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);\n            this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\n        }\n    });\n \n}\n\ncreateFileName() {\n    var d = new Date(),\n        n = d.getTime(),\n        newFileName = n + \".jpg\";\n    return newFileName;\n}\n \ncopyFileToLocalDir(namePath, currentName, newFileName) {\n    this.file.copyFile(namePath, currentName, this.file.dataDirectory, newFileName).then(success => {\n        this.updateStoredImages(newFileName);\n    }, error => {\n        this.presentToast('Error while storing file.');\n    });\n}\n \nupdateStoredImages(name) {\n    this.storage.get(STORAGE_KEY).then(images => {\n        let arr = JSON.parse(images);\n        if (!arr) {\n            let newImages = [name];\n            this.storage.set(STORAGE_KEY, JSON.stringify(newImages));\n        } else {\n            arr.push(name);\n            this.storage.set(STORAGE_KEY, JSON.stringify(arr));\n        }\n \n        let filePath = this.file.dataDirectory + name;\n        let resPath = this.pathForImage(filePath);\n \n        let newEntry = {\n            name: name,\n            path: resPath,\n            filePath: filePath\n        };\n \n        this.images = [newEntry, ...this.images];\n        this.ref.detectChanges(); // trigger change detection cycle\n    });\n}\n\ndeleteImage(imgEntry, position) {\n    this.images.splice(position, 1);\n \n    this.storage.get(STORAGE_KEY).then(images => {\n        let arr = JSON.parse(images);\n        let filtered = arr.filter(name => name != imgEntry.name);\n        this.storage.set(STORAGE_KEY, JSON.stringify(filtered));\n \n        var correctPath = imgEntry.filePath.substr(0, imgEntry.filePath.lastIndexOf('/') + 1);\n \n        this.file.removeFile(correctPath, imgEntry.name).then(res => {\n            this.presentToast('File removed.');\n        });\n    });\n}\n\nstartUpload(imgEntry) {\n    this.file.resolveLocalFilesystemUrl(imgEntry.filePath)\n        .then(entry => {\n            ( < FileEntry > entry).file(file => this.readFile(file))\n        })\n        .catch(err => {\n            this.presentToast('Error while reading file.');\n        });\n}\n \nreadFile(file: any) {\n    const reader = new FileReader();\n    reader.onloadend = () => {\n        const formData = new FormData();\n        const imgBlob = new Blob([reader.result], {\n            type: file.type\n        });\n        formData.append('file', imgBlob, file.name);\n        this.uploadImageData(formData);\n    };\n    reader.readAsArrayBuffer(file);\n}\n \nasync uploadImageData(formData: FormData) {\n    const loading = await this.loadingController.create({\n        message: 'Uploading image...',\n    });\n    await loading.present();\n \n    this.http.post(\"http://vaccrm.com/iglobe/CBA/api_v1/unwanted/image.php\", formData)\n        .pipe(\n            finalize(() => {\n                loading.dismiss();\n            })\n        )\n        .subscribe(res => {\n            if (res['success']) {\n                this.presentToast('File upload complete.')\n            } else {\n                this.presentToast('File upload failed.')\n            }\n        });\n}\n\n\n}\n"],"sourceRoot":""}